{% extends "base.html" %}
{% block title %}Report{% endblock %}
{% block header %}
    {% include "inventory/include/header.html" %}
{% endblock %}
{% block content %}
<body class="dashboard" data-admin-utc-offset="0">

    <div id="container">
        <div class="main" id="main">
            <main id="content-start" class="content" tabindex="-1">
                <div id="content" class="colMS">
                    <div id="content-related">
                        <div class="module" align="center">
                            <h2>REPORT FORM</h2>
                            <form method="post" style="max-width: 500px; width: 100%; margin: auto;">
                                {% csrf_token %}
                                {{ form }}
                                <button class="button" type="submit">Generate Report</button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Report Results Section -->
        <div class="results" align="center">
            {% if selected_department %}
                <table style="max-width: 80%; width: 100%; margin: auto; border-collapse: separate; border-spacing: 0 10px; text-align: center;">
                    <caption><h1>DEPARTMENT INVENTORY REPORT</h1></caption>

                    <!-- Department Information -->
                    <tr>
                        <th colspan="7">Department Details</th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <td>{{ selected_department.department_name }}</td>
                        <th>Address</th>
                        <td>{{ selected_department.department_address }}</td>
                        <th>Block</th>
                        <td>{{ selected_department.block }}</td>
                    </tr>
                    <tr>
                        <th>Total Items</th>
                        <td>{{ products|length }}</td>
                        <th>Contact</th>
                        <td>{{ selected_department.contact }}</td>
                    </tr>

                    <!-- Product Details -->
                    <tr>
                        <th colspan="7">Product Details</th>
                    </tr>
                    <tr>
                        <th>Sn</th>
                        <th>Item</th>
                        <th>Serial(Code)</th>
                        <th>Status</th>
                        <th>Batch</th>
                        <th>Condition</th>
                        <th>Quantity</th>
                    </tr>
                    {% if products %}
                        {% for product in products %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ product.name }}</td>
                                <td>{{ product.serial }}</td>
                                <td>{{ product.status }}</td>
                                <td>{{ product.batch }}</td>
                                <td>{{ product.condition }}</td>
                                <td>{{ product.quantity }}</td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="7">No products found in this department.</td>
                        </tr>
                    {% endif %}

                    <!-- Transaction Details -->
                    {% if transactions %}
                        <tr>
                            <th colspan="7">Transaction Details</th>
                        </tr>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Transaction Type</th>
                        </tr>
                        {% for transaction in transactions %}
                            <tr>
                                <td>{{ transaction.date }}</td>
                                <td>{{ transaction.product.name }}</td>
                                <td>{{ transaction.quantity }}</td>
                                <td>{{ transaction.transaction_type }}</td>
                            </tr>
                        {% endfor %}
                    {% endif %}

                    <!-- Report Generation Details -->
                    <tr>
                        <th>Generated by</th>
                        <td>{{ generated_by }}</td>
                        <th>Date</th>
                        <td>{{ generation_date }}</td>
                    </tr>
                </table>
                <div>
                    <button class="button" onclick="window.print()">Print Report</button>
                </div>
            {% endif %}
        </div>
    </div>

</body>
{% endblock %}

{% comment %} {% extends "base.html" %}
{% block title %}Report{% endblock %}
{% block header %}
    {% include "inventory/include/header.html" %}
{% endblock %}
{% block content %}
<body class="dashboard" data-admin-utc-offset="0">
    <div id="container">
        <div class="main" id="main">
            <main id="content-start" class="content" tabindex="-1">
                <div id="content" class="colMS">
                    <div id="content-related">
                        <div class="module" align="center">
                            <h2>REPORT FORM</h2>
                            <form method="post">
                                {% csrf_token %}
                                {{ form.as_p }}  <!-- Render the form fields in paragraphs -->
                                <button class="button" type="submit">Generate Report</button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Report Results Section -->
        <div class="results" align="center">
            {% if selected_department %}
                <table border="1px" class="table">
                    <caption><h1>DEPARTMENT INVENTORY REPORT</h1></caption>

                    <!-- Department Information -->
                    <tr>
                        <th colspan="7">Department Details</th>
                    </tr>
                    <tr>
                        <th scope="row">Name</th>
                        <td>{{ selected_department.department_name }}</td>
                        <th scope="row">Address</th>
                        <td>{{ selected_department.department_address }}</td>
                        <th scope="row">Block</th>
                        <td>{{ selected_department.block }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Total Items</th>
                        <td>{{ products|length }}</td>
                        <th scope="row">Contact</th>
                        <td>{{ selected_department.contact }}</td>
                    </tr>

                    <!-- Product Details -->
                    <tr>
                        <th colspan="7">Product Details</th>
                    </tr>
                    <tr>
                        <th>Sn</th>
                        <th>Item</th>
                        <th>Serial(Code)</th>
                        <th>Status</th>
                        <th>Batch</th>
                        <th>Condition</th>
                        <th>Quantity</th>
                    </tr>
                    {% if products %}
                        {% for product in products %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ product.name }}</td>
                                <td>{{ product.serial }}</td>
                                <td>{{ product.status }}</td>
                                <td>{{ product.batch }}</td>
                                <td>{{ product.condition }}</td>
                                <td>{{ product.quantity }}</td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="7">No products found in this department.</td>
                        </tr>
                    {% endif %}

                    <!-- Transaction Details -->
                    {% if transactions %}
                        <tr>
                            <th colspan="7">Transaction Details</th>
                        </tr>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Transaction Type</th>
                        </tr>
                        {% for transaction in transactions %}
                            <tr>
                                <td>{{ transaction.date }}</td>
                                <td>{{ transaction.product.name }}</td>
                                <td>{{ transaction.quantity }}</td>
                                <td>{{ transaction.transaction_type }}</td>
                            </tr>
                        {% endfor %}
                    {% endif %}

                    <!-- Report Generation Details -->
                    <tr>
                        <th scope="row">Generated by</th>
                        <td>{{ generated_by }}</td>
                        <th scope="row">Date</th>
                        <td>{{ generation_date }}</td>
                    </tr>
                </table>
                <div>
                    <button class="button" onclick="window.print()">Print Report</button>
                </div>
            {% else %}
                <p>No department selected. Please select a department to generate a report.</p>
            {% endif %}
        </div>
    </div>
</body>
{% endblock %}  {% endcomment %}
